# temig_en_engine_bot
engine monitoring bot for encounter

author: Temig (https://world.en.cx/UserDetails.aspx?uid=154783)


Функции бота:
- Отправка информации об уровне (номер, текст уровня,  автопереход, инфа о блокировке ответов)
- Отправка информации о секторах, бонусах, подсказках на уровне.
- Ввод кодов (в т.ч. принудительный ввод при блокировке ответов)
- Мониторинг движка (автопереход и выдача нового задания, приход подсказки, время до апа, закрытие сектора, закрытие бонуса)
- Мониторинг изменений (поменялось задание уровня,  добавлено сообщение, количество секторов поменялось,  количество бонусов поменялось, количество секторов для прохождения поменялось, добавлена подсказка)
- Запись на диск информации о прошедших уровнях (можно посмотреть закрывшие бонусы и сектора ответы)
- Показать скриншот текущего уровня (нужен Firefox)
- Открыть браузер, привязанный к сессии бота (нужен Firefox), на компьютере, где запущен бот
- Отправить геометку по координатам
- Парсинг текста на координаты и kml
- Добавить тг полевых игроков (их будет тегать через @ при апе)

Чтобы запустить бота, необходимо:
- Скачать архив 7z из папки dist, распаковать. Если запускаете на домашнем компьютере, скорее всего потребуется Win не ниже 10. Либо, скачать исходник en_bot.py, settings.ini и папку level_snapshots, установив все зависимости из reqiurements (нужен Питон 3.11)
- Зарегистрировать своего бота у https://t.me/BotFather, получить Токен, вписать этот токен в конфиг бота (Token в settings.ini)
- Добавить логин(ы) в тг в список админов бота в settings.ini
- Запустить бота
- Добавить зарегистрированного бота в игровой чат
- Авторизовать бота на игру игру (либо в самом игровом чате:
/auth домен id_игры логин пароль), 
либо через личку, если не хотите светить пароль в чате: 
/auth домен id_игры логин пароль id_чата
id чата можно получить в игровом чате командой /get_chat_id (для групповых чатов он отрицательный, это нормально, вписывать тоже с минусом)
- запустить мониторинг: /game_monitor

Подробно с командами бота можно ознакомиться /help:
- /help - этот help
- /auth домен id_игры логин пароль [id_чата] - авторизовать бота на игру в игровом чате
- /stop_auth - отключить чат
- /get_chat_id - получить id чата
- /game_monitor [0] - включить\[отключить] слежение за игрой
- /sectors [level№] - показать сектора [прошедшего_уровня]
- /bonuses [level№] - показать бонусы [прошедшего_уровня]
- /hints - показать подсказки
- /task - показать текущнее задание
- /screen - скриншот текущего уровня
- /любой_код - отправка кода после /
- /accept_codes [0] - включить\[выключить] прием кодов из чата
- /sector_monitor [0] - включить\[выключить] мониторинг секторов
- /bonus_monitor [0] - включить\[выключить] мониторинг бонусов
- /time - оставшееся время до апа
- /load_old_json - загрузить информацию о прошедших уровнях игры из файла (при перезапуске бота)
- /geo или /* координаты через пробел - отправить геометку по координатам 
- /set_players @игрок1 @игрок2 - установить список полевых игроков
- /open_browser открыть бразуер, привязанный к сессии бота
- /leave_chat id_чата - покинуть чат с указанным id
